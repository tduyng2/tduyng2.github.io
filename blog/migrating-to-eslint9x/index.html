<!doctype html><html lang=en><head><meta charset=utf-8><meta content=dark name=color-scheme><meta content="ie=edge" http-equiv=x-ua-compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content=https://tduyng2.github.io name=base><meta content=True name=HandheldFriendly><meta content=yes name=mobile-web-app-capable><meta content=yes name=apple-mobile-web-app-capable><meta content=default name=apple-mobile-web-app-status-bar-style><meta content="index, nofollow" name=robots><meta content="In this article, I share some experiences of migrating to ESLint 9.x, which includes significant breaking changes. We'll use the flat config, integrate ESLint plugins, and specify custom rules for various file types: .js, .cjs, .mjs and .ts" name=description><title>Migrate to ESLint 9.x</title><link href=/img/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/img/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/img/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><meta content="Migrate to ESLint 9.x" property=og:title><meta content=article property=og:type><meta content="Duy NG" property=og:site_name><meta content="In this article, I share some experiences of migrating to ESLint 9.x, which includes significant breaking changes. We'll use the flat config, integrate ESLint plugins, and specify custom rules for various file types: .js, .cjs, .mjs and .ts" name=description><meta content="In this article, I share some experiences of migrating to ESLint 9.x, which includes significant breaking changes. We'll use the flat config, integrate ESLint plugins, and specify custom rules for various file types: .js, .cjs, .mjs and .ts" property=og:description><meta content="https://tduyng2.github.io/blog/migrating-to-eslint9x/img/eslint9x.webp?h=7b2def4838470727ca3d" property=og:image><meta content=1500 property=og:image:width><meta content=750 property=og:image:height><meta content="https://tduyng2.github.io/blog/migrating-to-eslint9x/img/eslint9x.webp?h=7b2def4838470727ca3d" name=twitter:image><meta content=summary_large_image name=twitter:card><style>body{--primary-color:#5871a2;--primary-pale-color:#5871a210;--text-color:#3c4043;--text-pale-color:#94969f;--bg-color:#fff;--highlight-mark-color:#5f75b035;--callout-note-color:#5871a2;--callout-important-color:#8062b0;--callout-warning-color:#936e51;--callout-alert-color:#bc5252;--callout-question-color:#477389;--callout-tip-color:#3c8460}body.dark{--primary-color:#447dbf;--primary-pale-color:#5d77ac20;--text-color:#a5abba;--text-pale-color:#a5abba;--bg-color:#202124;--highlight-mark-color:#5f75b035;--callout-note-color:#5d77ac;--callout-important-color:#8062b0;--callout-warning-color:#936e51;--callout-alert-color:#bc5252;--callout-question-color:#477389;--callout-tip-color:#3c8460}body{--main-font:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--code-font:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--homepage-max-width:768px;--main-max-width:768px;--avatar-size:60px;--icon-size:20px;--homepage-font-size:16px;--homepage-line-height:1.75;--paragraph-font-size:16px;--paragraph-line-height:1.75;--aside-font-size:15px;--img-border-radius:0px;--callout-border-radius:0px;--detail-border-radius:0px;--dark-mode-img-brightness:.75;--dark-mode-chart-brightness:.75;--inline-code-border-radius:2px;--inline-code-bg-color:var(--primary-pale-color);--block-code-border-radius:0px;--block-code-border-color:var(--primary-color);--detail-border-color:var(--primary-color)}</style><link href=/main.css rel=stylesheet><script async data-do-not-track=true data-website-id=0403ec1f-fbf8-4e6c-b24b-0c585ca25873 defer src=https://analytics.eu.umami.is/script.js></script><body class=post><script>const theme=sessionStorage.getItem(`theme`);const match=window.matchMedia(`(prefers-color-scheme: dark)`).matches;if(theme&&theme==`dark`||!theme&&match){document.body.classList.add(`dark`);const a=document.querySelector(`link#hl`);if(a)a.href=`/hl-dark.css`}</script><header class=blur><div id=header-wrapper><nav><a class=instant href=/>tduyng</a><button aria-label="toggle expand" class=separator id=toggler>::</button><span class="wrap left fold">{</span><a class=instant href=/blog>blog</a><span class="wrap-separator fold">,</span><a class="instant fold" href=/projects>projects</a><span class="wrap-separator fold">,</span><a class="instant fold" href=/about>about</a><span class="wrap right fold">} ;</span></nav><div id=btns><a aria-label="rss feed" href=/atom.xml id=rss-btn><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M3 17C5.20914 17 7 18.7909 7 21H3V17ZM3 10C9.07513 10 14 14.9249 14 21H12C12 16.0294 7.97056 12 3 12V10ZM3 3C12.9411 3 21 11.0589 21 21H19C19 12.1634 11.8366 5 3 5V3Z" fill=currentColor></path></svg></a><button aria-label="table of content" id=toc-toggle><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M3 4H21V6H3V4ZM3 11H15V13H3V11ZM3 18H21V20H3V18Z" fill=currentColor></path></svg></button></div></div></header><dialog id=rss-mask><div><a href=https://tduyng2.github.io/atom.xml>https://tduyng2.github.io/atom.xml</a><button data-check-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z" fill="currentColor"></path></svg>' data-copy-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z" fill="currentColor"></path></svg>' aria-label=copy autofocus data-link=https://tduyng2.github.io/atom.xml><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z" fill=currentColor></path></svg></button></div></dialog><div id=wrapper><div id=blank></div><aside><nav><ul><li><a class=h2 href=#flat-config>Flat config</a><li><a class=h2 href=#example-of-migrating-eslint-9-x-in-a-typescript-project>Example of migrating ESLint 9.x in a Typescript project</a> <ul><li><a class=h3 href=#preparing-for-migration>Preparing for migration</a><li><a class=h3 href=#use-the-migrator-tool>Use the migrator tool</a><li><a class=h3 href=#writing-the-new-config>Writing the new config</a></ul></ul></nav><button aria-label="back to top" id=back-to-top><svg viewbox="0 0 24 24" height=24 width=24 xmlns=http://www.w3.org/2000/svg><path d="M11.9997 10.8284L7.04996 15.7782L5.63574 14.364L11.9997 8L18.3637 14.364L16.9495 15.7782L11.9997 10.8284Z" fill=currentColor></path></svg></button></aside><main><div><div data-check-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z" fill="currentColor"></path></svg>' data-copy-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z" fill="currentColor"></path></svg>' id=copy-cfg style=display:none></div><article data-backlink-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M9.41421 8L18.0208 16.6066L16.6066 18.0208L8 9.41421V17H6V6H17V8H9.41421Z" fill="currentColor"></path></svg>' class=prose><h1>Migrate to ESLint 9.x</h1><div id=post-info><div id=date><span id=publish>2024-07-16</span></div><div id=tags><a class=instant href=https://tduyng2.github.io/tags/eslint><span>#</span>eslint</a><a class=instant href=https://tduyng2.github.io/tags/typescript><span>#</span>typescript</a><a class=instant href=https://tduyng2.github.io/tags/migration><span>#</span>migration</a><a class=instant href=https://tduyng2.github.io/tags/nodejs><span>#</span>nodejs</a></div></div><blockquote class="callout alert hidden" data-alert-text-after=" days ago and may be out of date." data-alert-text-before="This article was last updated " data-days=365 id=outdate_alert><div class=icon><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M4.00098 20V14C4.00098 9.58172 7.5827 6 12.001 6C16.4193 6 20.001 9.58172 20.001 14V20H21.001V22H3.00098V20H4.00098ZM6.00098 20H18.001V14C18.001 10.6863 15.3147 8 12.001 8C8.68727 8 6.00098 10.6863 6.00098 14V20ZM11.001 2H13.001V5H11.001V2ZM19.7792 4.80761L21.1934 6.22183L19.0721 8.34315L17.6578 6.92893L19.7792 4.80761ZM2.80859 6.22183L4.22281 4.80761L6.34413 6.92893L4.92991 8.34315L2.80859 6.22183ZM7.00098 14C7.00098 11.2386 9.23956 9 12.001 9V11C10.3441 11 9.00098 12.3431 9.00098 14H7.00098Z" fill=currentColor></path></svg></div><div class=content></div></blockquote><p>Have you updated your ESLint setup to version 9.x? This version includes <a rel="nofollow noreferrer" href=https://eslint.org/blog/2024/04/eslint-v9.0.0-released/>many breaking changes</a>. Two major changes you need to consider are:<ul><li>Node.js < v18.18.0 and v19 are no longer supported.<li>Flat config is now the default and has some changes.</ul><h2 id=flat-config>Flat config<a aria-label="Anchor link for: flat-config" class=zola-anchor href=#flat-config style=visibility:hidden>#</a></h2><p>ESLint's new flat config system makes setting up easier by using just one JavaScript file (named <code>eslint.config.js, eslint.config.mjs, or eslint.config.cjs</code>). This is different from the old way, which used several different files like <code>.eslintrc*</code> and the <code>package.json</code>.<p>Here is a simple comparison between legacy config and flat config:<table><thead><tr><th style=text-align:center>Aspect<th style=text-align:center>Legacy Config<th style=text-align:center>Flat Config<tbody><tr><td style=text-align:center>Sources<td style=text-align:center><code>.eslintrc</code> <code>.js, .json, .yml</code>, <code>package.json</code>, etc.<td style=text-align:center><code>eslint.config.js</code> <code>.cjs, .mjs</code><tr><td style=text-align:center>Configuration style<td style=text-align:center>Convention-based <code>extends</code><td style=text-align:center>Explicit native imports<tr><td style=text-align:center>Plugin definition<td style=text-align:center>Package-named <code>plugins</code><td style=text-align:center>Plugins are objects<tr><td style=text-align:center>Inheritance tree<td style=text-align:center>Potentially complex<td style=text-align:center>Composable and traceable</table><p><strong>Benefits of the flat config</strong><ul><li>Performance: Reduced overhead due to a single configuration source.<li>Maintainability: Easier to manage and update.<li>Flexibility: More straightforward to compose and understand.</ul><p>You can learn more about the reason for the flat config by visiting these links: <a rel="nofollow noreferrer" href=https://eslint.org/blog/2023/10/flat-config-rollout-plans/>here</a> and <a rel="nofollow noreferrer" href=https://eslint.org/docs/latest/use/configure/configuration-files>here</a>. For more information on the syntax and concepts, check out the <a rel="nofollow noreferrer" href=https://eslint.org/docs/latest/use/configure/>ESLint configuration page</a>.<p>Now, in ESLint 9.x, the flat config is enabled by default, which means the old <code>eslintrc*</code> configuration files won't work properly.<p>Here is the flat config rollout timeline: <img alt="flat config rollout timeline" loading=lazy src=img/flat-config.webp> <small>Image by Antony Fu (https://portal.gitnation.org/contents/eslint-one-for-all-made-easy)</small><p>If you want to continue to use the legacy way, you can turn off the new system by setting an environment variable called <code>ESLINT_USE_FLAT_CONFIG</code> to <code>false</code>, but you'll see a warning message in your terminal. So the recommended way is to migrate to the flat config file. This might pose some challenges if you aren't familiar with this new system.<h2 id=example-of-migrating-eslint-9-x-in-a-typescript-project>Example of migrating ESLint 9.x in a Typescript project<a aria-label="Anchor link for: example-of-migrating-eslint-9-x-in-a-typescript-project" class=zola-anchor href=#example-of-migrating-eslint-9-x-in-a-typescript-project style=visibility:hidden>#</a></h2><p>We'll dive directly into an example to better understand how the flat config works. We will migrate a legacy ESLint config from ESLint 8.x to ESLint 9.x.<h3 id=preparing-for-migration>Preparing for migration<a aria-label="Anchor link for: preparing-for-migration" class=zola-anchor href=#preparing-for-migration style=visibility:hidden>#</a></h3><p>Here are some steps to consider for the migration:<ul><li><strong>Verify plugin support</strong>: Ensure that all the plugins you use support ESLint 9.x and the flat config. You can track <a rel="nofollow noreferrer" href=https://github.com/eslint/eslint/issues/18391>ESLint v9 support</a> and <a rel="nofollow noreferrer" href=https://github.com/eslint/eslint/issues/18093>flat config support</a>. Most popular plugins already support these changes.<li><strong>Update NodeJS and dependencies</strong><li><strong>Separate Prettier and ESLint</strong>: (If you use the <code>plugin:prettier</code> plugin) ESLint has <a rel="nofollow noreferrer" href=https://eslint.org/blog/2023/10/deprecating-formatting-rules/>deprecated formatter rules</a>, meaning there is no format syntax with ESLint. This reduces conflicts between ESLint and Prettier. To simplify the ESLint config, I recommend separating ESLint and Prettier, and no longer using <code>plugin:prettier</code>. This also allows flexibility in choosing other formatter tools like Biome.</ul><h3 id=use-the-migrator-tool>Use the migrator tool<a aria-label="Anchor link for: use-the-migrator-tool" class=zola-anchor href=#use-the-migrator-tool style=visibility:hidden>#</a></h3><p>The ESLint team has developed a <a rel="nofollow noreferrer" href=https://eslint.org/blog/2024/05/eslint-configuration-migrator/>migrator tool</a> to help convert legacy config files (e.g., <code>.eslintrc*</code>) to the flat config.<p>Here's how to use it:<pre class=language-bash data-lang=bash style=color:#f8f8f2;background-color:#282a36><code class=language-bash data-lang=bash><span style=color:#50fa7b>npx</span><span> @eslint/migrate-config .eslintrc.yml
</span></code></pre><p>Here is a simple example of a legacy config file <code>.eslintrc.yml</code>:<pre class=language-yaml data-lang=yaml style=color:#f8f8f2;background-color:#282a36><code class=language-yaml data-lang=yaml><span style=color:#ff79c6>parser</span><span>: </span><span style=color:#f1fa8c>'@typescript-eslint/parser'
</span><span style=color:#ff79c6>parserOptions</span><span>:
</span><span>    </span><span style=color:#ff79c6>project</span><span>: </span><span style=color:#f1fa8c>./tsconfig.json
</span><span>    </span><span style=color:#ff79c6>sourceType</span><span>: </span><span style=color:#f1fa8c>module
</span><span style=color:#ff79c6>env</span><span>:
</span><span>    </span><span style=color:#ff79c6>node</span><span>: </span><span style=color:#bd93f9>true
</span><span>    </span><span style=color:#ff79c6>jest</span><span>: </span><span style=color:#bd93f9>true
</span><span style=color:#ff79c6>plugins</span><span>:
</span><span>  - </span><span style=color:#f1fa8c>import
</span><span style=color:#ff79c6>extends</span><span>:
</span><span>    - </span><span style=color:#f1fa8c>eslint:recommended
</span><span>    - </span><span style=color:#f1fa8c>plugin:@typescript-eslint/recommended
</span><span>    - </span><span style=color:#f1fa8c>plugin:prettier/recommended
</span><span>    - </span><span style=color:#f1fa8c>plugin:import/recommended
</span><span>    - </span><span style=color:#f1fa8c>plugin:import/typescript
</span><span style=color:#ff79c6>settings</span><span>:
</span><span>  </span><span style=color:#ff79c6>import/resolver</span><span>:
</span><span>    </span><span style=color:#ff79c6>typescript</span><span>: </span><span style=color:#bd93f9>true
</span><span>    </span><span style=color:#ff79c6>node</span><span>: </span><span style=color:#bd93f9>true
</span><span style=color:#ff79c6>rules</span><span>:
</span><span>    </span><span style=color:#f1fa8c>'@typescript-eslint/no-use-before-define'</span><span>: </span><span style=color:#f1fa8c>'off'
</span><span>    </span><span style=color:#f1fa8c>'require-await'</span><span>: </span><span style=color:#f1fa8c>'off'
</span><span>    </span><span style=color:#f1fa8c>'no-duplicate-imports'</span><span>: </span><span style=color:#f1fa8c>'error'
</span><span>    </span><span style=color:#f1fa8c>'no-unneeded-ternary'</span><span>: </span><span style=color:#f1fa8c>'error'
</span><span>    </span><span style=color:#f1fa8c>'prefer-object-spread'</span><span>: </span><span style=color:#f1fa8c>'error'
</span><span>    </span><span style=color:#f1fa8c>'@typescript-eslint/no-unused-vars'</span><span>: [</span><span style=color:#f1fa8c>'error'</span><span>, { </span><span style=color:#ff79c6>ignoreRestSiblings</span><span>: </span><span style=color:#bd93f9>true</span><span>, </span><span style=color:#ff79c6>args</span><span>: </span><span style=color:#f1fa8c>'none' </span><span>}]
</span></code></pre><p>This simple ESLint config is for a TypeScript NodeJS project with Jest for testing and includes various plugins for different rules. Your project might contain more plugins, more rules, or use different config file types (<code>.eslintrc.{js, cjs, mjs}</code> or <code>.eslintrc</code>), but the process for updating your setup will be similar<p>Here is the generated config by migrator tool:<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#ff79c6>import </span><span>{ </span><span style=color:#fff>fixupConfigRules</span><span>, </span><span style=color:#fff>fixupPluginRules </span><span>} </span><span style=color:#ff79c6>from </span><span style=color:#f1fa8c>"@eslint/compat"</span><span>;
</span><span style=color:#ff79c6>import </span><span style=color:#fff>_import </span><span style=color:#ff79c6>from </span><span style=color:#f1fa8c>"eslint-plugin-import"</span><span>;
</span><span style=color:#ff79c6>import </span><span style=color:#fff>globals </span><span style=color:#ff79c6>from </span><span style=color:#f1fa8c>"globals"</span><span>;
</span><span style=color:#ff79c6>import </span><span style=color:#fff>tsParser </span><span style=color:#ff79c6>from </span><span style=color:#f1fa8c>"@typescript-eslint/parser"</span><span>;
</span><span style=color:#ff79c6>import </span><span style=color:#fff>path </span><span style=color:#ff79c6>from </span><span style=color:#f1fa8c>"node:path"</span><span>;
</span><span style=color:#ff79c6>import </span><span>{ </span><span style=color:#fff>fileURLToPath </span><span>} </span><span style=color:#ff79c6>from </span><span style=color:#f1fa8c>"node:url"</span><span>;
</span><span style=color:#ff79c6>import </span><span style=color:#fff>js </span><span style=color:#ff79c6>from </span><span style=color:#f1fa8c>"@eslint/js"</span><span>;
</span><span style=color:#ff79c6>import </span><span>{ </span><span style=color:#fff>FlatCompat </span><span>} </span><span style=color:#ff79c6>from </span><span style=color:#f1fa8c>"@eslint/eslintrc"</span><span>;
</span><span>
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>__filename </span><span style=color:#ff79c6>= </span><span style=color:#50fa7b>fileURLToPath</span><span>(</span><span style=color:#ff79c6>import.</span><span>meta</span><span style=color:#ff79c6>.</span><span style=color:#fff>url</span><span>);
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>__dirname </span><span style=color:#ff79c6>= </span><span style=color:#fff>path</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>dirname</span><span>(__filename);
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>compat </span><span style=color:#ff79c6>= new </span><span>FlatCompat({
</span><span>    baseDirectory: __dirname,
</span><span>    recommendedConfig: </span><span style=color:#fff>js</span><span style=color:#ff79c6>.</span><span style=color:#fff>configs</span><span style=color:#ff79c6>.</span><span style=color:#fff>recommended</span><span>,
</span><span>    allConfig: </span><span style=color:#fff>js</span><span style=color:#ff79c6>.</span><span style=color:#fff>configs</span><span style=color:#ff79c6>.</span><span>all
</span><span>});
</span><span>
</span><span style=color:#ff79c6>export default </span><span>[</span><span style=color:#ff79c6>...</span><span style=color:#50fa7b>fixupConfigRules</span><span>(</span><span style=color:#fff>compat</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>extends</span><span>(
</span><span>    </span><span style=color:#f1fa8c>"eslint:recommended"</span><span>,
</span><span>    </span><span style=color:#f1fa8c>"plugin:@typescript-eslint/recommended"</span><span>,
</span><span>    </span><span style=color:#f1fa8c>"plugin:prettier/recommended"</span><span>,
</span><span>    </span><span style=color:#f1fa8c>"plugin:import/recommended"</span><span>,
</span><span>    </span><span style=color:#f1fa8c>"plugin:import/typescript"</span><span>,
</span><span>)), {
</span><span>    plugins: {
</span><span>        import: </span><span style=color:#50fa7b>fixupPluginRules</span><span>(</span><span style=color:#fff>_import</span><span>),
</span><span>    },
</span><span>
</span><span>    languageOptions: {
</span><span>        globals: {
</span><span>            </span><span style=color:#ff79c6>...</span><span style=color:#fff>globals</span><span style=color:#ff79c6>.</span><span style=color:#fff>node</span><span>,
</span><span>            </span><span style=color:#ff79c6>...</span><span style=color:#fff>globals</span><span style=color:#ff79c6>.</span><span style=color:#fff>jest</span><span>,
</span><span>        },
</span><span>
</span><span>        parser: </span><span style=color:#fff>tsParser</span><span>,
</span><span>        ecmaVersion: </span><span style=color:#bd93f9>5</span><span>,
</span><span>        sourceType: </span><span style=color:#f1fa8c>"module"</span><span>,
</span><span>
</span><span>        parserOptions: {
</span><span>            project: </span><span style=color:#f1fa8c>"./tsconfig.json"</span><span>,
</span><span>        },
</span><span>    },
</span><span>
</span><span>    settings: {
</span><span>        </span><span style=color:#f1fa8c>"import/resolver"</span><span>: {
</span><span>            typescript: </span><span style=color:#bd93f9>true</span><span>,
</span><span>            node: </span><span style=color:#bd93f9>true</span><span>,
</span><span>        },
</span><span>    },
</span><span>
</span><span>    rules: {
</span><span>        </span><span style=color:#f1fa8c>"@typescript-eslint/no-use-before-define"</span><span>: </span><span style=color:#f1fa8c>"off"</span><span>,
</span><span>        </span><span style=color:#f1fa8c>"require-await"</span><span>: </span><span style=color:#f1fa8c>"off"</span><span>,
</span><span>        </span><span style=color:#f1fa8c>"no-duplicate-imports"</span><span>: </span><span style=color:#f1fa8c>"error"</span><span>,
</span><span>        </span><span style=color:#f1fa8c>"no-unneeded-ternary"</span><span>: </span><span style=color:#f1fa8c>"error"</span><span>,
</span><span>        </span><span style=color:#f1fa8c>"prefer-object-spread"</span><span>: </span><span style=color:#f1fa8c>"error"</span><span>,
</span><span>
</span><span>        </span><span style=color:#f1fa8c>"@typescript-eslint/no-unused-vars"</span><span>: [</span><span style=color:#f1fa8c>"error"</span><span>, {
</span><span>            ignoreRestSiblings: </span><span style=color:#bd93f9>true</span><span>,
</span><span>            args: </span><span style=color:#f1fa8c>"none"</span><span>,
</span><span>        }],
</span><span>    },
</span><span>}];
</span></code></pre><p>The migrator will prompt you to install additional packages:<pre class=language-bash data-lang=bash style=color:#f8f8f2;background-color:#282a36><code class=language-bash data-lang=bash><span style=color:#50fa7b>Wrote</span><span> new config to ./eslint.config.mjs
</span><span>
</span><span style=color:#50fa7b>You</span><span> will need to install the following packages to use the new config:
</span><span style=color:#50fa7b>-</span><span> @eslint/compat
</span><span style=color:#50fa7b>-</span><span> globals
</span><span style=color:#50fa7b>-</span><span> @eslint/js
</span><span style=color:#50fa7b>-</span><span> @eslint/eslintrc
</span></code></pre><ul><li><a rel="nofollow noreferrer" href=https://www.npmjs.com/package/@eslint/js>@eslint/js</a>: ESLint team start to <a rel="nofollow noreferrer" href=https://eslint.org/blog/2024/07/whats-coming-next-for-eslint/>make a core rewrite the ESLint</a>, all the rules, documentations will move to the new package. This is a ESLint Javascript package rules. We will also have <code>@eslint/json</code> for json linter, <code>@eslint/markdown</code> for markdown linter.<li><a rel="nofollow noreferrer" href=https://www.npmjs.com/package/@eslint/eslintrc>@eslint/eslintrc</a>: This gabage contains the legacy <code>eslintrc</code> configuration file format for ESLint. You will not need it if you start to write a new flat config files<li><a rel="nofollow noreferrer" href=https://www.npmjs.com/package/@eslint/compat>@eslint/compat</a>: This package allow you to wrap existing previous ESLint rules, plugins and configurations.</ul><p>After using the migrator, we can identify additional dependencies we need to install: <code>@eslint/js</code> and <code>globals</code>. We no longer need the package <code>@eslint/eslintrc</code> since we are now using the flat config file. Additionally, <code>@eslint/compat</code> is not necessary unless certain plugins in your project do not support the flat config.<p>This tool might not produce a perfect result, but it provides a good starting point. That help us understand better how the syntax of the flat config look like. But in all cases, it will not work directly, we need to require a lot of manual adjustments. We will see the next part to know how better writting the flat config.<h3 id=writing-the-new-config>Writing the new config<a aria-label="Anchor link for: writing-the-new-config" class=zola-anchor href=#writing-the-new-config style=visibility:hidden>#</a></h3><p>Considering our project contains different file extensions such as <code>js, mjs, ts</code>, the new config should be written like this:<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#ff79c6>import </span><span style=color:#fff>importPlugin </span><span style=color:#ff79c6>from </span><span style=color:#f1fa8c>'eslint-plugin-import'
</span><span style=color:#ff79c6>import </span><span style=color:#fff>globals </span><span style=color:#ff79c6>from </span><span style=color:#f1fa8c>'globals'
</span><span style=color:#ff79c6>import </span><span style=color:#fff>tsParser </span><span style=color:#ff79c6>from </span><span style=color:#f1fa8c>'@typescript-eslint/parser'
</span><span style=color:#ff79c6>import </span><span style=color:#fff>eslintJs </span><span style=color:#ff79c6>from </span><span style=color:#f1fa8c>'@eslint/js'
</span><span style=color:#ff79c6>import </span><span style=color:#fff>eslintTs </span><span style=color:#ff79c6>from </span><span style=color:#f1fa8c>'typescript-eslint'
</span><span>
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>tsFiles </span><span style=color:#ff79c6>= </span><span>[</span><span style=color:#f1fa8c>'{app,tests}/**/*.ts'</span><span>]
</span><span>
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>languageOptions </span><span style=color:#ff79c6>= </span><span>{
</span><span>    globals: {
</span><span>        </span><span style=color:#ff79c6>...</span><span style=color:#fff>globals</span><span style=color:#ff79c6>.</span><span style=color:#fff>node</span><span>,
</span><span>        </span><span style=color:#ff79c6>...</span><span style=color:#fff>globals</span><span style=color:#ff79c6>.</span><span style=color:#fff>jest</span><span>,
</span><span>    },
</span><span>    ecmaVersion: </span><span style=color:#bd93f9>2023</span><span>,
</span><span>    sourceType: </span><span style=color:#f1fa8c>'module'</span><span>,
</span><span>}
</span><span>
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>customTypescriptConfig </span><span style=color:#ff79c6>= </span><span>{
</span><span>    files: </span><span style=color:#fff>tsFiles</span><span>,
</span><span>    plugins: {
</span><span>        import: </span><span style=color:#fff>importPlugin</span><span>,
</span><span>        </span><span style=color:#f1fa8c>'import/parsers'</span><span>: </span><span style=color:#fff>tsParser</span><span>,
</span><span>    },
</span><span>    languageOptions: {
</span><span>        </span><span style=color:#ff79c6>...</span><span style=color:#fff>languageOptions</span><span>,
</span><span>        parser: </span><span style=color:#fff>tsParser</span><span>,
</span><span>        parserOptions: {
</span><span>            project: </span><span style=color:#f1fa8c>'./tsconfig.json'</span><span>,
</span><span>        },
</span><span>    },
</span><span>    settings: {
</span><span>        </span><span style=color:#f1fa8c>'import/parsers'</span><span>: {
</span><span>            </span><span style=color:#f1fa8c>'@typescript-eslint/parser'</span><span>: [</span><span style=color:#f1fa8c>'.ts'</span><span>],
</span><span>        },
</span><span>    },
</span><span>    rules: {
</span><span>        </span><span style=color:#f1fa8c>'import/export'</span><span>: </span><span style=color:#f1fa8c>'error'</span><span>,
</span><span>        </span><span style=color:#f1fa8c>'import/no-duplicates'</span><span>: </span><span style=color:#f1fa8c>'warn'</span><span>,
</span><span>        </span><span style=color:#ff79c6>...</span><span style=color:#fff>importPlugin</span><span style=color:#ff79c6>.</span><span style=color:#fff>configs</span><span style=color:#ff79c6>.</span><span style=color:#fff>typescript</span><span style=color:#ff79c6>.</span><span>rules,
</span><span>        </span><span style=color:#f1fa8c>'@typescript-eslint/no-use-before-define'</span><span>: </span><span style=color:#f1fa8c>'off'</span><span>,
</span><span>        </span><span style=color:#f1fa8c>'require-await'</span><span>: </span><span style=color:#f1fa8c>'off'</span><span>,
</span><span>        </span><span style=color:#f1fa8c>'no-duplicate-imports'</span><span>: </span><span style=color:#f1fa8c>'error'</span><span>,
</span><span>        </span><span style=color:#f1fa8c>'no-unneeded-ternary'</span><span>: </span><span style=color:#f1fa8c>'error'</span><span>,
</span><span>        </span><span style=color:#f1fa8c>'prefer-object-spread'</span><span>: </span><span style=color:#f1fa8c>'error'</span><span>,
</span><span>
</span><span>        </span><span style=color:#f1fa8c>'@typescript-eslint/no-unused-vars'</span><span>: [
</span><span>            </span><span style=color:#f1fa8c>'error'</span><span>,
</span><span>            {
</span><span>                ignoreRestSiblings: </span><span style=color:#bd93f9>true</span><span>,
</span><span>                args: </span><span style=color:#f1fa8c>'none'</span><span>,
</span><span>            },
</span><span>        ],
</span><span>    },
</span><span>}
</span><span>
</span><span style=color:#6272a4>// Add the files for applying the recommended TypeScript configs 
</span><span style=color:#6272a4>// only for the Typescript files.
</span><span style=color:#6272a4>// This is necessary when we have the multiple extensions files 
</span><span style=color:#6272a4>// (e.g. .ts, .tsx, .js, .cjs, .mjs, etc.).
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>recommendedTypeScriptConfigs </span><span style=color:#ff79c6>= </span><span>[
</span><span>    </span><span style=color:#ff79c6>...</span><span style=color:#fff>eslintTs</span><span style=color:#ff79c6>.</span><span style=color:#fff>configs</span><span style=color:#ff79c6>.</span><span style=color:#fff>recommended</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>map</span><span>((</span><span style=color:#ffb86c;font-style:italic>config</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span>({
</span><span>        </span><span style=color:#ff79c6>...</span><span style=color:#fff>config</span><span>,
</span><span>        files: </span><span style=color:#fff>tsFiles</span><span>,
</span><span>    })),
</span><span>    </span><span style=color:#ff79c6>...</span><span style=color:#fff>eslintTs</span><span style=color:#ff79c6>.</span><span style=color:#fff>configs</span><span style=color:#ff79c6>.</span><span style=color:#fff>stylistic</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>map</span><span>((</span><span style=color:#ffb86c;font-style:italic>config</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span>({
</span><span>        </span><span style=color:#ff79c6>...</span><span style=color:#fff>config</span><span>,
</span><span>        files: </span><span style=color:#fff>tsFiles</span><span>,
</span><span>    })),
</span><span>]
</span><span>
</span><span style=color:#ff79c6>export default </span><span>[
</span><span>    { ignores: [</span><span style=color:#f1fa8c>'docs/*'</span><span>, </span><span style=color:#f1fa8c>'build/*'</span><span>, </span><span style=color:#f1fa8c>'lib/*'</span><span>, </span><span style=color:#f1fa8c>'dist/*'</span><span>] }, </span><span style=color:#6272a4>// global ignores
</span><span>    </span><span style=color:#fff>eslintJs</span><span style=color:#ff79c6>.</span><span style=color:#fff>configs</span><span style=color:#ff79c6>.</span><span style=color:#fff>recommended</span><span>,
</span><span>    </span><span style=color:#ff79c6>...</span><span style=color:#fff>recommendedTypeScriptConfigs</span><span>,
</span><span>    </span><span style=color:#fff>customTypescriptConfig</span><span>,
</span><span>]
</span></code></pre><p>You might notice that we don’t need to use tools like <code>@eslint/compat</code> or <code>@eslint/eslintrc</code>, which keeps the config cleaner and easier to maintain.<p>If some plugins in your project do not yet support the flat config, you will need to use <code>@eslint/compat</code>. For example, the package <code>eslint-plugin-import</code> <a rel="nofollow noreferrer" href=https://github.com/import-js/eslint-plugin-import/issues/2556>does not fully support the flat config yet</a>, so some rules might not work correctly. In my case, I use <code>importPlugin.configs.typescript.rules</code> which works without using <code>@eslint/compat</code>.<p>For specific rules and file extensions, such as <code>common.js</code> files, we provide separate configurations to ensure they are correctly linted according to their specific requirements:<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>customCommonJSConfig </span><span style=color:#ff79c6>= </span><span>{
</span><span>    files: [</span><span style=color:#f1fa8c>'{app,tests}/**/*.cjs'</span><span>],
</span><span>    languageOptions: {
</span><span>        </span><span style=color:#ff79c6>...</span><span style=color:#fff>languageOptions</span><span>,
</span><span>        sourceType: </span><span style=color:#f1fa8c>'commonjs'</span><span>,
</span><span>    },
</span><span>    rules: </span><span style=color:#fff>customCommonJSRules
</span><span>}
</span><span>
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>customESMConfig </span><span style=color:#ff79c6>= </span><span>{
</span><span>    files: [</span><span style=color:#f1fa8c>'{app,tests}/**/*.{.js,mjs}'</span><span>],
</span><span>    </span><span style=color:#fff>languageOptions</span><span>,
</span><span>    rules: </span><span style=color:#fff>customESMRules
</span><span>}
</span><span>
</span><span style=color:#6272a4>// And add it to the export config
</span><span style=color:#ff79c6>export default </span><span>[
</span><span>    { ignores: [</span><span style=color:#f1fa8c>'docs/*'</span><span>, </span><span style=color:#f1fa8c>'build/*'</span><span>, </span><span style=color:#f1fa8c>'lib/*'</span><span>, </span><span style=color:#f1fa8c>'dist/*'</span><span>] }, </span><span style=color:#6272a4>// global ignores,
</span><span>    </span><span style=color:#fff>eslintJs</span><span style=color:#ff79c6>.</span><span style=color:#fff>configs</span><span style=color:#ff79c6>.</span><span style=color:#fff>recommended</span><span>,
</span><span>    </span><span style=color:#fff>customESMConfig</span><span>,
</span><span>    </span><span style=color:#fff>customCommonJSConfig</span><span>,
</span><span>    </span><span style=color:#ff79c6>...</span><span style=color:#fff>recommendedTypeScriptConfigs</span><span>,
</span><span>    </span><span style=color:#fff>customTypescriptConfig</span><span>,
</span><span>]
</span></code></pre><p>By using the <code>files</code> field, you can ensure that the defined rules apply only to the specified files, providing more granular control over your linting process. This is especially useful in projects with multiple file types, such as JavaScript, TypeScript, and CommonJS files, etc..., where each type may require different linting rules.<p>That's all!<p><strong>Bonus: ESLint Inspector</strong><p>Once you have finished writing your ESLint config file, you can use the tool <a rel="nofollow noreferrer" href=https://eslint.org/blog/2024/04/eslint-config-inspector/>eslint-config-inspector</a>. It's a visual tool for inspecting and understanding your ESLint flat configs. Give it a try to better understand your config.<div class=pagination><hr> Enjoyed this article? For more technical content on Typescript or backend development, stay updated by subcribe my blog through RSS feeds. <div class=pagination__buttons><span class="button previous"> <a href=https://tduyng2.github.io/blog/enum-typescript/> <span class=button__icon>←</span>  <span class=button__text>Why you might be using Enums in TypeScript wrong</span> </a> </span></div></div></article><div class=giscus></div><script data-repo-id="MDEwOlJlcG9zaXRvcnkyNjAzNTM0NzM=" async crossorigin data-category=General data-category-id=DIC_kwDOD4Stwc4CfSpo data-dark-theme=noborder_dark data-emit-metadata=0 data-input-position=bottom data-lang=en data-lazy-loading=true data-light-theme=noborder_light data-mapping=specific data-reactions-enabled=1 data-repo=tduyng/tduyng.github.io data-strict=1 data-term=migrating-to-eslint9x src=https://giscus.app/client.js></script></div><footer><div class=copyright><p>© 2024 Duy NG</div><a class="instant fold" href=/tags>tags</a><a class="instant fold" href=/subscribe>subscribe</a><a class="instant fold" href=/contact>contact</a><a class="instant fold" href=/privacy>privacy</a><a class="instant fold" href=/sitemap.xml>sitemap</a><a class="instant fold" href=/atom.xml>rss</a></footer></main></div><script src=/js/lightense.min.js></script><script src=/js/main.js></script>