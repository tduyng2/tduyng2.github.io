<!doctype html><html lang=en><head><meta charset=utf-8><meta content=dark name=color-scheme><meta content="ie=edge" http-equiv=x-ua-compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content=https://tduyng2.github.io name=base><meta content=True name=HandheldFriendly><meta content=yes name=mobile-web-app-capable><meta content=yes name=apple-mobile-web-app-capable><meta content=default name=apple-mobile-web-app-status-bar-style><meta content="index, nofollow" name=robots><meta content="Learn to build a basic web application using Node.js and Docker, simplifying the deployment process across different environments." name=description><title>Create simple web app Nodejs with Docker</title><link href=/img/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/img/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/img/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><meta content="Create simple web app Nodejs with Docker" property=og:title><meta content=article property=og:type><meta content="Duy NG" property=og:site_name><meta content="Learn to build a basic web application using Node.js and Docker, simplifying the deployment process across different environments." name=description><meta content="Learn to build a basic web application using Node.js and Docker, simplifying the deployment process across different environments." property=og:description><meta content="https://tduyng2.github.io/img/avatar.webp?h=742e6e00a4c9ec8e8fc2" property=og:image><meta content=736 property=og:image:width><meta content=736 property=og:image:height><meta content="https://tduyng2.github.io/img/avatar.webp?h=742e6e00a4c9ec8e8fc2" name=twitter:image><meta content=summary_large_image name=twitter:card><style>body{--primary-color:#5871a2;--primary-pale-color:#5871a210;--text-color:#3c4043;--text-pale-color:#94969f;--bg-color:#fff;--highlight-mark-color:#5f75b035;--callout-note-color:#5871a2;--callout-important-color:#8062b0;--callout-warning-color:#936e51;--callout-alert-color:#bc5252;--callout-question-color:#477389;--callout-tip-color:#3c8460}body.dark{--primary-color:#447dbf;--primary-pale-color:#5d77ac20;--text-color:#a5abba;--text-pale-color:#a5abba;--bg-color:#202124;--highlight-mark-color:#5f75b035;--callout-note-color:#5d77ac;--callout-important-color:#8062b0;--callout-warning-color:#936e51;--callout-alert-color:#bc5252;--callout-question-color:#477389;--callout-tip-color:#3c8460}body{--main-font:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--code-font:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--homepage-max-width:768px;--main-max-width:768px;--avatar-size:60px;--icon-size:20px;--homepage-font-size:16px;--homepage-line-height:1.75;--paragraph-font-size:16px;--paragraph-line-height:1.75;--aside-font-size:15px;--img-border-radius:0px;--callout-border-radius:0px;--detail-border-radius:0px;--dark-mode-img-brightness:.75;--dark-mode-chart-brightness:.75;--inline-code-border-radius:2px;--inline-code-bg-color:var(--primary-pale-color);--block-code-border-radius:0px;--block-code-border-color:var(--primary-color);--detail-border-color:var(--primary-color)}</style><link href=/main.css rel=stylesheet><script async data-do-not-track=true data-website-id=0403ec1f-fbf8-4e6c-b24b-0c585ca25873 defer src=https://analytics.eu.umami.is/script.js></script><body class=post><script>const theme=sessionStorage.getItem(`theme`);const match=window.matchMedia(`(prefers-color-scheme: dark)`).matches;if(theme&&theme==`dark`||!theme&&match){document.body.classList.add(`dark`);const a=document.querySelector(`link#hl`);if(a)a.href=`/hl-dark.css`}</script><header class=blur><div id=header-wrapper><nav><a class=instant href=/>tduyng</a><button aria-label="toggle expand" class=separator id=toggler>::</button><span class="wrap left fold">{</span><a class=instant href=/blog>blog</a><span class="wrap-separator fold">,</span><a class="instant fold" href=/projects>projects</a><span class="wrap-separator fold">,</span><a class="instant fold" href=/about>about</a><span class="wrap right fold">} ;</span></nav><div id=btns><a aria-label="rss feed" href=/atom.xml id=rss-btn><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M3 17C5.20914 17 7 18.7909 7 21H3V17ZM3 10C9.07513 10 14 14.9249 14 21H12C12 16.0294 7.97056 12 3 12V10ZM3 3C12.9411 3 21 11.0589 21 21H19C19 12.1634 11.8366 5 3 5V3Z" fill=currentColor></path></svg></a><button aria-label="table of content" id=toc-toggle><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M3 4H21V6H3V4ZM3 11H15V13H3V11ZM3 18H21V20H3V18Z" fill=currentColor></path></svg></button></div></div></header><dialog id=rss-mask><div><a href=https://tduyng2.github.io/atom.xml>https://tduyng2.github.io/atom.xml</a><button data-check-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z" fill="currentColor"></path></svg>' data-copy-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z" fill="currentColor"></path></svg>' aria-label=copy autofocus data-link=https://tduyng2.github.io/atom.xml><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z" fill=currentColor></path></svg></button></div></dialog><div id=wrapper><div id=blank></div><aside><nav><ul><li><a class=h2 href=#steps-to-create-a-web-application-nodejs-with-docker>Steps to create a web application Nodejs with Docker</a><li><a class=h2 href=#getting-started>Getting started</a> <ul><li><a class=h3 href=#create-root-folder-of-project>Create root folder of project</a><li><a class=h3 href=#init-package-json>Init package.json</a><li><a class=h3 href=#create-index-js-file-in-root-project>Create index.js file (in root project)</a><li><a class=h3 href=#create-dockerfile>Create Dockerfile</a><li><a class=h3 href=#create-dockerignore-file-with-the-following-content>Create .dockerignore file with the following content:</a><li><a class=h3 href=#build-your-image>Build your image</a><li><a class=h3 href=#run-the-image>Run the image</a><li><a class=h3 href=#test-your-docker-container>Test your Docker container</a></ul><li><a class=h2 href=#some-useful-other-commands>Some useful other commands</a><li><a class=h2 href=#reference>Reference</a></ul></nav><button aria-label="back to top" id=back-to-top><svg viewbox="0 0 24 24" height=24 width=24 xmlns=http://www.w3.org/2000/svg><path d="M11.9997 10.8284L7.04996 15.7782L5.63574 14.364L11.9997 8L18.3637 14.364L16.9495 15.7782L11.9997 10.8284Z" fill=currentColor></path></svg></button></aside><main><div><div data-check-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z" fill="currentColor"></path></svg>' data-copy-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z" fill="currentColor"></path></svg>' id=copy-cfg style=display:none></div><article data-backlink-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M9.41421 8L18.0208 16.6066L16.6066 18.0208L8 9.41421V17H6V6H17V8H9.41421Z" fill="currentColor"></path></svg>' class=prose><h1>Create simple web app Nodejs with Docker</h1><div id=post-info><div id=date><span id=publish>2020-12-22</span></div><div id=tags><a class=instant href=https://tduyng2.github.io/tags/docker><span>#</span>docker</a><a class=instant href=https://tduyng2.github.io/tags/nodejs><span>#</span>nodejs</a><a class=instant href=https://tduyng2.github.io/tags/javascript><span>#</span>javascript</a></div></div><blockquote class="callout alert hidden" data-alert-text-after=" days ago and may be out of date." data-alert-text-before="This article was last updated " data-days=365 id=outdate_alert><div class=icon><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M4.00098 20V14C4.00098 9.58172 7.5827 6 12.001 6C16.4193 6 20.001 9.58172 20.001 14V20H21.001V22H3.00098V20H4.00098ZM6.00098 20H18.001V14C18.001 10.6863 15.3147 8 12.001 8C8.68727 8 6.00098 10.6863 6.00098 14V20ZM11.001 2H13.001V5H11.001V2ZM19.7792 4.80761L21.1934 6.22183L19.0721 8.34315L17.6578 6.92893L19.7792 4.80761ZM2.80859 6.22183L4.22281 4.80761L6.34413 6.92893L4.92991 8.34315L2.80859 6.22183ZM7.00098 14C7.00098 11.2386 9.23956 9 12.001 9V11C10.3441 11 9.00098 12.3431 9.00098 14H7.00098Z" fill=currentColor></path></svg></div><div class=content></div></blockquote><p>How to get a Node.js application into a Docker container?<h2 id=steps-to-create-a-web-application-nodejs-with-docker>Steps to create a web application Nodejs with Docker<a aria-label="Anchor link for: steps-to-create-a-web-application-nodejs-with-docker" class=zola-anchor href=#steps-to-create-a-web-application-nodejs-with-docker style=visibility:hidden>#</a></h2><ul><li>Create NodeJS web app<li>Create a Dockerfile<li>Build image from Dockerfile<li>Run image as container<li>Connect to web app from a browser</ul><h2 id=getting-started>Getting started<a aria-label="Anchor link for: getting-started" class=zola-anchor href=#getting-started style=visibility:hidden>#</a></h2><h3 id=create-root-folder-of-project>Create root folder of project<a aria-label="Anchor link for: create-root-folder-of-project" class=zola-anchor href=#create-root-folder-of-project style=visibility:hidden>#</a></h3><pre class=language-bash data-lang=bash style=color:#f8f8f2;background-color:#282a36><code class=language-bash data-lang=bash><span style=color:#50fa7b>$</span><span> mkdir simple-nodejs
</span><span style=color:#50fa7b>$</span><span> cd simple-nodejs
</span></code></pre><h3 id=init-package-json>Init <code>package.json</code><a aria-label="Anchor link for: init-package-json" class=zola-anchor href=#init-package-json style=visibility:hidden>#</a></h3><pre class=language-bash data-lang=bash style=color:#f8f8f2;background-color:#282a36><code class=language-bash data-lang=bash><span style=color:#50fa7b>$</span><span> yarn init</span><span style=color:#ffb86c;font-style:italic> -y
</span></code></pre><p>Add dependencies and scripts in this <strong>package.json</strong> file<pre class=language-json data-lang=json style=color:#f8f8f2;background-color:#282a36><code class=language-json data-lang=json><span>{
</span><span>  </span><span style=color:#eee>"</span><span style=color:#f1fa8c>name</span><span style=color:#eee>"</span><span>: </span><span style=color:#eee>"</span><span style=color:#f1fa8c>simple-nodejs</span><span style=color:#eee>"</span><span>,
</span><span>  </span><span style=color:#eee>"</span><span style=color:#f1fa8c>version</span><span style=color:#eee>"</span><span>: </span><span style=color:#eee>"</span><span style=color:#f1fa8c>1.0.0</span><span style=color:#eee>"</span><span>,
</span><span>  </span><span style=color:#eee>"</span><span style=color:#f1fa8c>main</span><span style=color:#eee>"</span><span>: </span><span style=color:#eee>"</span><span style=color:#f1fa8c>index.js</span><span style=color:#eee>"</span><span>,
</span><span>  </span><span style=color:#eee>"</span><span style=color:#f1fa8c>license</span><span style=color:#eee>"</span><span>: </span><span style=color:#eee>"</span><span style=color:#f1fa8c>MIT</span><span style=color:#eee>"</span><span>,
</span><span>  </span><span style=color:#eee>"</span><span style=color:#f1fa8c>scripts</span><span style=color:#eee>"</span><span>: {
</span><span>    </span><span style=color:#eee>"</span><span style=color:#f1fa8c>start</span><span style=color:#eee>"</span><span>: </span><span style=color:#eee>"</span><span style=color:#f1fa8c>node index.js</span><span style=color:#eee>"</span><span>,
</span><span>    </span><span style=color:#eee>"</span><span style=color:#f1fa8c>dev</span><span style=color:#eee>"</span><span>: </span><span style=color:#eee>"</span><span style=color:#f1fa8c>nodemon index.js</span><span style=color:#eee>"
</span><span>  },
</span><span>  </span><span style=color:#eee>"</span><span style=color:#f1fa8c>dependencies</span><span style=color:#eee>"</span><span>: {
</span><span>    </span><span style=color:#eee>"</span><span style=color:#f1fa8c>express</span><span style=color:#eee>"</span><span>: </span><span style=color:#eee>"</span><span style=color:#f1fa8c>*</span><span style=color:#eee>"</span><span>,
</span><span>    </span><span style=color:#eee>"</span><span style=color:#f1fa8c>nodemon</span><span style=color:#eee>"</span><span>: </span><span style=color:#eee>"</span><span style=color:#f1fa8c>*</span><span style=color:#eee>"</span><span>,
</span><span>    </span><span style=color:#eee>"</span><span style=color:#f1fa8c>dotenv</span><span style=color:#eee>"</span><span>: </span><span style=color:#eee>"</span><span style=color:#f1fa8c>*</span><span style=color:#eee>"</span><span>,
</span><span>    </span><span style=color:#eee>"</span><span style=color:#f1fa8c>mongoose</span><span style=color:#eee>"</span><span>: </span><span style=color:#eee>"</span><span style=color:#f1fa8c>*</span><span style=color:#eee>"</span><span>,
</span><span>    </span><span style=color:#eee>"</span><span style=color:#f1fa8c>axios</span><span style=color:#eee>"</span><span>: </span><span style=color:#eee>"</span><span style=color:#f1fa8c>*</span><span style=color:#eee>"
</span><span>  }
</span><span>}
</span></code></pre><h3 id=create-index-js-file-in-root-project>Create <code>index.js</code> file (in root project)<a aria-label="Anchor link for: create-index-js-file-in-root-project" class=zola-anchor href=#create-index-js-file-in-root-project style=visibility:hidden>#</a></h3><p>Add the following code to run server nodejs with <code>express</code> framework.<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>express </span><span style=color:#ff79c6>= </span><span style=color:#8be9fd>require</span><span>(</span><span style=color:#f1fa8c>'express'</span><span>);
</span><span>
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>app </span><span style=color:#ff79c6>= </span><span style=color:#50fa7b>express</span><span>();
</span><span>
</span><span style=color:#fff>app</span><span style=color:#ff79c6>.</span><span style=color:#8be9fd>get</span><span>(</span><span style=color:#f1fa8c>'/'</span><span>, (</span><span style=color:#ffb86c;font-style:italic>req</span><span>, </span><span style=color:#ffb86c;font-style:italic>res</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span>{
</span><span>  </span><span style=color:#fff>res</span><span style=color:#ff79c6>.</span><span style=color:#8be9fd>send</span><span>(</span><span style=color:#f1fa8c>'Hi there!'</span><span>);
</span><span>});
</span><span>
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>port </span><span style=color:#ff79c6>= </span><span>process</span><span style=color:#ff79c6>.</span><span>env</span><span style=color:#ff79c6>.</span><span style=color:#fff>PORT </span><span style=color:#ff79c6>|| </span><span style=color:#bd93f9>3000</span><span>;
</span><span>
</span><span style=color:#fff>app</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>listen</span><span>(</span><span style=color:#fff>port</span><span>, () </span><span style=color:#8be9fd;font-style:italic>=> </span><span>{
</span><span>  </span><span style=color:#66d9ef;font-style:italic>console</span><span style=color:#ff79c6>.</span><span style=color:#8be9fd>log</span><span>(</span><span style=color:#f1fa8c>`Server is running on port ${</span><span style=color:#fff>port</span><span style=color:#f1fa8c>}`</span><span>);
</span><span>});
</span><span>
</span></code></pre><h3 id=create-dockerfile>Create <code>Dockerfile</code><a aria-label="Anchor link for: create-dockerfile" class=zola-anchor href=#create-dockerfile style=visibility:hidden>#</a></h3><pre class=language-bash data-lang=bash style=color:#f8f8f2;background-color:#282a36><code class=language-bash data-lang=bash><span style=color:#50fa7b>$</span><span> touch Dockerfile
</span></code></pre><ul><li><p>The first thing we need to do is define from what image we want to build from. Here is the version 12.18.1 of Nodejs from <a rel="nofollow noreferrer" href=https://hub.docker.com/>DockerHub</a></p> <pre class=language-yml data-lang=yml style=color:#f8f8f2;background-color:#282a36><code class=language-yml data-lang=yml><span style=color:#f1fa8c>FROM node:12.18.1
</span></code></pre><li><p>Next we create a directory to hold the application code inside the image. This will be the working directory for your application.</p> <pre class=language-yml data-lang=yml style=color:#f8f8f2;background-color:#282a36><code class=language-yml data-lang=yml><span style=color:#6272a4># Create app directory
</span><span style=color:#f1fa8c>WORKDIR /app
</span></code></pre><li><p>This image comes with Node.js and NPM already installed so the next thing we need to do is to install your app dependencies using the npm binary. Please note that if you are using npm version 4 or earlier a package-lock.json file will not be generated.</p> <pre class=language-yml data-lang=yml style=color:#f8f8f2;background-color:#282a36><code class=language-yml data-lang=yml><span style=color:#6272a4># Install app dependencies
</span><span style=color:#6272a4># A wildcard is used to ensure both package.json AND package-lock.json are copied
</span><span style=color:#6272a4># where available (npm@5+)
</span><span style=color:#f1fa8c>COPY package*.json ./
</span><span>
</span><span style=color:#f1fa8c>RUN npm install
</span><span style=color:#6272a4># If you are building your code for production
</span><span style=color:#6272a4># RUN npm ci --only=production
</span></code></pre><li><p>To bundle your app's source code inside the Docker image, use the COPY instruction:</p> <pre class=language-yml data-lang=yml style=color:#f8f8f2;background-color:#282a36><code class=language-yml data-lang=yml><span style=color:#6272a4># Bundle app source
</span><span style=color:#f1fa8c>COPY . .
</span></code></pre><li><p>Your app binds to port <code>8080</code> so you'll use the <code>EXPOSE</code> instruction to have it mapped by the docker daemon:</p> <pre class=language-yml data-lang=yml style=color:#f8f8f2;background-color:#282a36><code class=language-yml data-lang=yml><span style=color:#f1fa8c>EXPOSE 8080
</span></code></pre><li><p>Last but not least, define the command to run your app using CMD which defines your runtime. Here we will use <code>node index.js</code> to start your server as write in scripts of <code>package.json</code> file.</p> <pre class=language-yml data-lang=yml style=color:#f8f8f2;background-color:#282a36><code class=language-yml data-lang=yml><span style=color:#f1fa8c>CMD ["yarn", "dev"]
</span></code></pre><li><p>Your <code>Dockerfile</code> should now look like this:</p> <pre class=language-yml data-lang=yml style=color:#f8f8f2;background-color:#282a36><code class=language-yml data-lang=yml><span>  </span><span style=color:#6272a4># Specify a base image
</span><span>  </span><span style=color:#f1fa8c>FROM node:12.18.1
</span><span>
</span><span>  </span><span style=color:#6272a4># Create app directory
</span><span>  </span><span style=color:#f1fa8c>WORKDIR /app
</span><span>
</span><span>  </span><span style=color:#6272a4># Install app dependencies
</span><span>  </span><span style=color:#6272a4># A wildcard is used to ensure both package.json AND package-lock.json are copied
</span><span>  </span><span style=color:#6272a4># where available (npm@5+)
</span><span>  </span><span style=color:#f1fa8c>COPY package*.json ./
</span><span>
</span><span>  </span><span style=color:#6272a4># Install dependencies
</span><span>  </span><span style=color:#f1fa8c>RUN yarn install
</span><span>  </span><span style=color:#6272a4># If you are building your code for production
</span><span>  </span><span style=color:#6272a4># RUN npm ci --only=production
</span><span>
</span><span>  </span><span style=color:#6272a4># Bundle app source
</span><span>  </span><span style=color:#f1fa8c>COPY . .
</span><span>
</span><span>  </span><span style=color:#f1fa8c>EXPOSE 8080
</span><span>
</span><span>  </span><span style=color:#6272a4># Default command
</span><span>  </span><span style=color:#f1fa8c>CMD [ "yarn", "dev" ]
</span></code></pre></ul><h3 id=create-dockerignore-file-with-the-following-content>Create <code>.dockerignore</code> file with the following content:<a aria-label="Anchor link for: create-dockerignore-file-with-the-following-content" class=zola-anchor href=#create-dockerignore-file-with-the-following-content style=visibility:hidden>#</a></h3><pre class=language-yml data-lang=yml style=color:#f8f8f2;background-color:#282a36><code class=language-yml data-lang=yml><span style=color:#f1fa8c>node_modules
</span><span style=color:#f1fa8c>npm-debug.log
</span></code></pre><h3 id=build-your-image>Build your image<a aria-label="Anchor link for: build-your-image" class=zola-anchor href=#build-your-image style=visibility:hidden>#</a></h3><p>Go to the directory that has your <code>Dockerfile</code> and run the following command to build the Docker image. The <code>-t</code> flag lets you tag your image so it's easier to find later using the <code>docker images</code> command:<pre class=language-bash data-lang=bash style=color:#f8f8f2;background-color:#282a36><code class=language-bash data-lang=bash><span style=color:#50fa7b>$</span><span> docker build</span><span style=color:#ffb86c;font-style:italic> -t </span><span style=color:#ff79c6><</span><span>your username</span><span style=color:#ff79c6>></span><span>/node-docker .
</span></code></pre><p>Your image will now be listed by Docker:<pre class=language-bash data-lang=bash style=color:#f8f8f2;background-color:#282a36><code class=language-bash data-lang=bash><span style=color:#50fa7b>$</span><span> docker images
</span><span>
</span><span style=color:#6272a4># Example
</span><span style=color:#50fa7b>REPOSITORY</span><span>                      TAG        ID              CREATED
</span><span style=color:#50fa7b>node</span><span>                            12         1934b0b038d1    5 days ago
</span><span style=color:#ff79c6><</span><span>your </span><span style=color:#50fa7b>username</span><span style=color:#ff79c6>></span><span>/node-web-app    latest     d64d3505b0d2    1 minute ago
</span></code></pre><h3 id=run-the-image>Run the image<a aria-label="Anchor link for: run-the-image" class=zola-anchor href=#run-the-image style=visibility:hidden>#</a></h3><p>Running your image with <code>-d</code> runs the container in detached mode, leaving the container running in the background. The <code>-p</code> flag redirects a public port to a private port inside the container. Run the image you previously built:<pre class=language-bash data-lang=bash style=color:#f8f8f2;background-color:#282a36><code class=language-bash data-lang=bash><span style=color:#50fa7b>$</span><span> docker run</span><span style=color:#ffb86c;font-style:italic> -p</span><span> 49160:8080</span><span style=color:#ffb86c;font-style:italic> -d </span><span style=color:#ff79c6><</span><span>your username</span><span style=color:#ff79c6>></span><span>/node-docker
</span></code></pre><p>Print the output of your app:<pre class=language-bash data-lang=bash style=color:#f8f8f2;background-color:#282a36><code class=language-bash data-lang=bash><span style=color:#6272a4># Get container ID
</span><span style=color:#50fa7b>$</span><span> docker ps
</span><span>
</span><span style=color:#6272a4># Print app output
</span><span style=color:#50fa7b>$</span><span> docker logs </span><span style=color:#ff79c6><</span><span>container id</span><span style=color:#ff79c6>>
</span><span>
</span><span style=color:#6272a4># Example
</span><span style=color:#50fa7b>Running</span><span> on http://localhost:8080
</span></code></pre><p>If you need to go inside the container you can use the exec command:<pre class=language-bash data-lang=bash style=color:#f8f8f2;background-color:#282a36><code class=language-bash data-lang=bash><span style=color:#6272a4># Enter the container
</span><span style=color:#50fa7b>$</span><span> docker exec</span><span style=color:#ffb86c;font-style:italic> -it </span><span style=color:#ff79c6><</span><span>container id</span><span style=color:#ff79c6>></span><span> /bin/bash
</span></code></pre><h3 id=test-your-docker-container>Test your Docker container<a aria-label="Anchor link for: test-your-docker-container" class=zola-anchor href=#test-your-docker-container style=visibility:hidden>#</a></h3><p>To test your app, get the port of your app that Docker mapped:<pre class=language-bash data-lang=bash style=color:#f8f8f2;background-color:#282a36><code class=language-bash data-lang=bash><span style=color:#50fa7b>$</span><span> docker ps
</span><span>
</span><span style=color:#6272a4># Example
</span><span style=color:#50fa7b>ID</span><span>            IMAGE                                COMMAND    ...   PORTS
</span><span style=color:#50fa7b>ecce33b30ebf  </span><span style=color:#ff79c6><</span><span>your username</span><span style=color:#ff79c6>></span><span>/node-docker:latest  npm start  ...   49160-</span><span style=color:#ff79c6>></span><span style=color:#bd93f9>8080
</span></code></pre><p>In the example above, Docker mapped the 8080 port inside of the container to the port 49160 on your machine.<p>Now you can call your app using curl (install if needed via: sudo apt-get install curl):<pre class=language-bash data-lang=bash style=color:#f8f8f2;background-color:#282a36><code class=language-bash data-lang=bash><span style=color:#50fa7b>$</span><span> curl</span><span style=color:#ffb86c;font-style:italic> -i</span><span> localhost:49160
</span><span>
</span><span style=color:#50fa7b>HTTP/1.1</span><span> 200 OK
</span><span style=color:#50fa7b>X-Powered-By:</span><span> Express
</span><span style=color:#50fa7b>Content-Type:</span><span> text/html</span><span style=color:#ff79c6>; </span><span style=color:#fff>charset</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>utf-8
</span><span style=color:#50fa7b>Content-Length:</span><span> 9
</span><span style=color:#50fa7b>ETag:</span><span> W/</span><span style=color:#f1fa8c>"9-leKwfhJ1TlLDfP1IVUTU9ERZe/8"
</span><span style=color:#50fa7b>Date:</span><span> Mon, 23 Nov 2020 14:41:00 GMT
</span><span style=color:#50fa7b>Connection:</span><span> keep-alive
</span><span>
</span><span style=color:#50fa7b>Hi</span><span> there!
</span></code></pre><h2 id=some-useful-other-commands>Some useful other commands<a aria-label="Anchor link for: some-useful-other-commands" class=zola-anchor href=#some-useful-other-commands style=visibility:hidden>#</a></h2><pre class=language-bash data-lang=bash style=color:#f8f8f2;background-color:#282a36><code class=language-bash data-lang=bash><span style=color:#50fa7b>$</span><span> docker images </span><span style=color:#6272a4>#show all images installed
</span><span style=color:#50fa7b>$</span><span> docker rmi</span><span style=color:#ffb86c;font-style:italic> -f </span><span style=color:#ff79c6><</span><span>image id</span><span style=color:#ff79c6>> </span><span style=color:#6272a4>#remove image by id
</span><span style=color:#50fa7b>$</span><span> docker ps </span><span style=color:#6272a4>#list all containers running
</span><span style=color:#50fa7b>$</span><span> docker ps</span><span style=color:#ffb86c;font-style:italic> -aq </span><span style=color:#6272a4>#list all containers (only ids)
</span><span style=color:#50fa7b>$</span><span> docker stop </span><span style=color:#ff79c6><</span><span>container id</span><span style=color:#ff79c6>> </span><span style=color:#6272a4>#stop a container
</span><span style=color:#50fa7b>$</span><span> docker stop $(</span><span style=color:#50fa7b>docker</span><span> ps</span><span style=color:#ffb86c;font-style:italic> -aq</span><span>) </span><span style=color:#6272a4>#stop all running container
</span><span style=color:#50fa7b>$</span><span> docker rm $(</span><span style=color:#50fa7b>docker</span><span> ps</span><span style=color:#ffb86c;font-style:italic> -aq</span><span>) </span><span style=color:#6272a4>#remove all containers
</span><span style=color:#50fa7b>$</span><span> docker rmi $(</span><span style=color:#50fa7b>docker</span><span> images</span><span style=color:#ffb86c;font-style:italic> -q</span><span>) </span><span style=color:#6272a4>#remove all images
</span><span style=color:#50fa7b>$</span><span> docker system prune </span><span style=color:#6272a4>#remove all stopped containers, all dangling images, all networks, all dangling build cache
</span><span style=color:#50fa7b>$</span><span> docker system prune</span><span style=color:#ffb86c;font-style:italic> -a </span><span style=color:#6272a4># remove all stopped container, all images, all networks, all build caches
</span><span>
</span></code></pre><h2 id=reference>Reference<a aria-label="Anchor link for: reference" class=zola-anchor href=#reference style=visibility:hidden>#</a></h2><ul><li><a rel="nofollow noreferrer" href=https://github.com/tduyng/try-docker/tree/master/01.dive-into-docker/simple-nodejs>Code GitHub example</a><li><a rel="nofollow noreferrer" href=https://hub.docker.com/_/node/>Official Nodejs Docker image</a><li><a rel="nofollow noreferrer" href=https://github.com/nodejs/docker-node/blob/master/docs/BestPractices.md>Nodejs Docker best practice guide</a><li><a rel="nofollow noreferrer" href=https://docs.docker.com/>Official Docker documentation</a><li><a rel="nofollow noreferrer" href=https://nodejs.org/en/docs/guides/nodejs-docker-webapp/>Doc guides NodeJS-Docker</a><li><a rel="nofollow noreferrer" href=https://docs.docker.com/get-started/nodejs/build-images/>Doc guides Docker-NodeJS</a></ul><div class=pagination><div class=pagination__buttons><span class="button previous"> <a href=https://tduyng2.github.io/blog/config-esling-prettier-react-app/> <span class=button__icon>←</span>  <span class=button__text>Config ESLint, Prettier for React App in VSCode</span> </a> </span><span class="button next"> <a href=https://tduyng2.github.io/blog/why-use-dockercompose/> <span class=button__text>Why use Docker compose</span>  <span class=button__icon>→</span> </a> </span></div></div></article><div class=giscus></div><script data-repo-id="MDEwOlJlcG9zaXRvcnkyNjAzNTM0NzM=" async crossorigin data-category=General data-category-id=DIC_kwDOD4Stwc4CfSpo data-dark-theme=noborder_dark data-emit-metadata=0 data-input-position=bottom data-lang=en data-lazy-loading=true data-light-theme=noborder_light data-mapping=specific data-reactions-enabled=1 data-repo=tduyng/tduyng.github.io data-strict=1 data-term=create-simple-project-nodejs-with-docker src=https://giscus.app/client.js></script></div><footer><div class=copyright><p>© 2024 Duy NG</div><a class="instant fold" href=/tags>tags</a><a class="instant fold" href=/subscribe>subscribe</a><a class="instant fold" href=/contact>contact</a><a class="instant fold" href=/privacy>privacy</a><a class="instant fold" href=/sitemap.xml>sitemap</a><a class="instant fold" href=/atom.xml>rss</a></footer></main></div><script src=/js/lightense.min.js></script><script src=/js/main.js></script>